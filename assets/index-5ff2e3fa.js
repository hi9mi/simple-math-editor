import{a as l,c as D,p as M,d as v,z as d,$ as R,b as P,i as T,j as s,F as _,e as n,M as z}from"./index-14fda832.js";import{R as N}from"./react-f90a43bd.js";import{C as O,M as y}from"./card-490ce473.js";import"./react-dom-52501ad4.js";import"./mathlive-e2caa731.js";import"./better-react-mathjax-a47d9c67.js";function A(e){return function(r){var b={},u={},g={};for(var c in r.bind){var a=r.bind[c];l.event(a)||l.effect(a)?b[c]=a:l.store(a)?u[c]=a:g[c]=a}var F=H(u)?null:u;return function(U){var f,p,j=F?e.useUnit(F):{},E=e.useUnit(b),$=Object.assign({},j,E,g,U),C=k((f=r.hooks)===null||f===void 0?void 0:f.mounted,e),w=k((p=r.hooks)===null||p===void 0?void 0:p.unmounted,e);return N.useEffect(function(){return C&&C(),function(){w&&w()}},[]),N.createElement(r.view,$)}}}function k(e,t){if(e)return l.event(e)||l.effect(e)?t.useUnit(e):e}function H(e){return Object.keys(e).length===0}var m=A(D);let V=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const o=M(""),i=M(""),S=v(),L=v(),h=v();d({clock:S,target:o});d({clock:L,target:i});const q=d({clock:h,source:[o,i],filter:([e])=>e.length>0,fn:([e,t])=>({id:V(),latex:e,description:t})});d({clock:h,target:[o.reinit,i.reinit]});R.on(q,(e,t)=>[...e,t]);P({store:o,key:"latex-form-value"});P({store:i,key:"description-form-value"});const x={latexChanged:S,latexFormSubmitted:h,descriptionChanged:L},ee=()=>{const e=T(x.latexFormSubmitted);return s(_,{children:[n("h2",{className:"mb-5 text-xl font-semibold",children:"Create mathematical expression"}),s("form",{onSubmit:r=>{r.preventDefault(),e()},className:"flex flex-col gap-5",children:[n(G,{}),n(B,{}),s("div",{className:"flex flex-col gap-2",children:[n("h3",{className:"font-semibold",children:"Preview"}),s(O,{className:"flex flex-col gap-8 overflow-x-auto empty:hidden",children:[n(I,{}),n(J,{})]})]}),n("button",{type:"submit",className:"btn",children:"Create"})]})]})},B=m({view:y,bind:{onChange:x.latexChanged,value:o}}),G=m({view:({value:e,onChange:t})=>s("div",{className:"flex flex-col gap-2",children:[n("label",{htmlFor:"description",children:"Description"}),n("textarea",{id:"description",name:"description",inputMode:"text",value:e,onChange:t,className:"h-24 resize-none rounded-md border border-black p-2 outline-none focus:border-violet-400"})]}),bind:{onChange:e=>x.descriptionChanged(e.currentTarget.value),value:i}}),I=m({view:({description:e})=>e.length>0?n("p",{className:"break-words",children:e}):null,bind:{description:i}}),J=m({view:({latex:e})=>e.length>0?n(z,{latex:e}):null,bind:{latex:o}});export{ee as default};
